<!DOCTYPE html>


<head>
    <meta charset="utf-8" />
    <title> Script in the Body </title>
</head>

<body onresize="resize()" style="overflow-y: hidden">

    <canvas id="myCanvas" style=" border:2px solid #000000;" onmousemove="move()">
        Za stara przegladarka!
    </canvas>

    <script type="application/json" id="data">
        {
            "time_begin": "2025-07-01",
            "time_end": "2025-09-01",
            "rooms": [{
                    "id": "1",
                    "text": "JxtjQ"
                },
                {
                    "id": "2",
                    "text": "ahOJf"
                },
                {
                    "id": "3",
                    "text": "wXIiZ"
                },
                {
                    "id": "4",
                    "text": "7YSmL"
                },
                {
                    "id": "5",
                    "text": "kHB9I"
                },
                {
                    "id": "6",
                    "text": "0TFHG"
                },
                {
                    "id": "7",
                    "text": "y8UNX"
                },
                {
                    "id": "8",
                    "text": "fqdgC"
                },
                {
                    "id": "9",
                    "text": "dmOTw"
                },
                {
                    "id": "10",
                    "text": "qwHSC"
                },
                {
                    "id": "11",
                    "text": "p1LEm"
                },
                {
                    "id": "12",
                    "text": "seW4L"
                },
                {
                    "id": "13",
                    "text": "RV6ie"
                },
                {
                    "id": "14",
                    "text": "oOsNX"
                },
                {
                    "id": "15",
                    "text": "Un4L9"
                },
                {
                    "id": "16",
                    "text": "nzKhG"
                },
                {
                    "id": "17",
                    "text": "vYgCJ"
                },
                {
                    "id": "18",
                    "text": "DTRaq"
                },
                {
                    "id": "19",
                    "text": "ryrLc"
                },
                {
                    "id": "20",
                    "text": "oMP2K"
                },
                {
                    "id": "21",
                    "text": "O3EMD"
                },
                {
                    "id": "22",
                    "text": "PYzDp"
                },
                {
                    "id": "23",
                    "text": "4m6i4"
                },
                {
                    "id": "24",
                    "text": "qrPfj"
                },
                {
                    "id": "25",
                    "text": "BI383"
                },
                {
                    "id": "26",
                    "text": "qBMzH"
                },
                {
                    "id": "27",
                    "text": "3ihvc"
                },
                {
                    "id": "28",
                    "text": "ZBo7U"
                },
                {
                    "id": "29",
                    "text": "kW4pS"
                },
                {
                    "id": "30",
                    "text": "PCJO6"
                },
                {
                    "id": "31",
                    "text": "m3b5l"
                },
                {
                    "id": "32",
                    "text": "i9HYP"
                },
                {
                    "id": "33",
                    "text": "hmgG4"
                },
                {
                    "id": "34",
                    "text": "aqk6i"
                },
                {
                    "id": "35",
                    "text": "d52VE"
                },
                {
                    "id": "36",
                    "text": "GFOXa"
                },
                {
                    "id": "37",
                    "text": "8lWzr"
                },
                {
                    "id": "38",
                    "text": "QvKml"
                },
                {
                    "id": "39",
                    "text": "3Tvra"
                },
                {
                    "id": "40",
                    "text": "x3cyk"
                }
            ],
            "reservations": [{
                    "id_room": "25",
                    "id": "3040",
                    "text": "M9wwc7SfKU",
                    "begin": "2025-07-14T00:00",
                    "end": "2025-07-24T00:00"
                },
                {
                    "id_room": "39",
                    "id": "1701",
                    "text": "j7ZSrwgnKc",
                    "begin": "2025-08-05T00:00",
                    "end": "2025-08-11T00:00"
                },
                {
                    "id_room": "33",
                    "id": "1821",
                    "text": "epdPSk9GNI",
                    "begin": "2025-08-09T00:00",
                    "end": "2025-08-13T00:00"
                },
                {
                    "id_room": "26",
                    "id": "8147",
                    "text": "pRbVoR9sFc",
                    "begin": "2025-07-02T00:00",
                    "end": "2025-07-13T00:00"
                },
                {
                    "id_room": "7",
                    "id": "3982",
                    "text": "O1kgT8M91g",
                    "begin": "2025-07-15T00:00",
                    "end": "2025-07-19T00:00"
                },
                {
                    "id_room": "11",
                    "id": "5358",
                    "text": "vIvnB9F15D",
                    "begin": "2025-08-02T00:00",
                    "end": "2025-08-04T00:00"
                },
                {
                    "id_room": "38",
                    "id": "9391",
                    "text": "WSDato7Y3A",
                    "begin": "2025-08-31T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "16",
                    "id": "5514",
                    "text": "JvgeHDTchS",
                    "begin": "2025-08-18T00:00",
                    "end": "2025-08-30T00:00"
                },
                {
                    "id_room": "3",
                    "id": "1443",
                    "text": "8xkDmGg0QE",
                    "begin": "2025-08-08T00:00",
                    "end": "2025-08-14T00:00"
                },
                {
                    "id_room": "32",
                    "id": "7738",
                    "text": "VTub4pq9BK",
                    "begin": "2025-07-22T00:00",
                    "end": "2025-07-29T00:00"
                },
                {
                    "id_room": "17",
                    "id": "7129",
                    "text": "uk6coir0Pz",
                    "begin": "2025-07-02T00:00",
                    "end": "2025-07-05T00:00"
                },
                {
                    "id_room": "34",
                    "id": "8818",
                    "text": "K2IkSywtCw",
                    "begin": "2025-07-27T00:00",
                    "end": "2025-08-06T00:00"
                },
                {
                    "id_room": "31",
                    "id": "8234",
                    "text": "XOvHHdSA8A",
                    "begin": "2025-08-18T00:00",
                    "end": "2025-08-22T00:00"
                },
                {
                    "id_room": "34",
                    "id": "4965",
                    "text": "Q9SNXTtART",
                    "begin": "2025-07-10T00:00",
                    "end": "2025-07-15T00:00"
                },
                {
                    "id_room": "17",
                    "id": "9470",
                    "text": "BRvOzPgxUF",
                    "begin": "2025-07-08T00:00",
                    "end": "2025-07-13T00:00"
                },
                {
                    "id_room": "32",
                    "id": "4025",
                    "text": "5taWsyvsrr",
                    "begin": "2025-08-02T00:00",
                    "end": "2025-08-06T00:00"
                },
                {
                    "id_room": "40",
                    "id": "8682",
                    "text": "mrIwiV9YUj",
                    "begin": "2025-08-06T00:00",
                    "end": "2025-08-10T00:00"
                },
                {
                    "id_room": "37",
                    "id": "5973",
                    "text": "3LbFrQ7Poz",
                    "begin": "2025-08-14T00:00",
                    "end": "2025-08-19T00:00"
                },
                {
                    "id_room": "25",
                    "id": "3697",
                    "text": "9hyd2ew3XA",
                    "begin": "2025-08-22T00:00",
                    "end": "2025-08-27T00:00"
                },
                {
                    "id_room": "20",
                    "id": "9326",
                    "text": "7bZMw176JC",
                    "begin": "2025-07-23T00:00",
                    "end": "2025-07-31T00:00"
                },
                {
                    "id_room": "28",
                    "id": "9927",
                    "text": "IN9uKOcGpM",
                    "begin": "2025-08-31T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "34",
                    "id": "2183",
                    "text": "jrpDx64U65",
                    "begin": "2025-08-16T00:00",
                    "end": "2025-08-22T00:00"
                },
                {
                    "id_room": "10",
                    "id": "3170",
                    "text": "mH63b1BYQR",
                    "begin": "2025-07-16T00:00",
                    "end": "2025-07-30T00:00"
                },
                {
                    "id_room": "7",
                    "id": "4476",
                    "text": "ZDUoU5tXRl",
                    "begin": "2025-08-22T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "21",
                    "id": "7230",
                    "text": "idgyeKQp1N",
                    "begin": "2025-07-31T00:00",
                    "end": "2025-08-03T00:00"
                },
                {
                    "id_room": "19",
                    "id": "3743",
                    "text": "vJ341ONkX9",
                    "begin": "2025-07-30T00:00",
                    "end": "2025-08-07T00:00"
                },
                {
                    "id_room": "9",
                    "id": "8920",
                    "text": "TpX6oLtk4D",
                    "begin": "2025-08-10T00:00",
                    "end": "2025-08-17T00:00"
                },
                {
                    "id_room": "27",
                    "id": "1132",
                    "text": "6tIv6ASm9D",
                    "begin": "2025-08-30T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "25",
                    "id": "6517",
                    "text": "N2pWpb3sF5",
                    "begin": "2025-08-15T00:00",
                    "end": "2025-08-22T00:00"
                },
                {
                    "id_room": "9",
                    "id": "4709",
                    "text": "rNhaRbIZwV",
                    "begin": "2025-07-25T00:00",
                    "end": "2025-08-06T00:00"
                },
                {
                    "id_room": "35",
                    "id": "7301",
                    "text": "Bn11h14GGT",
                    "begin": "2025-08-14T00:00",
                    "end": "2025-08-15T00:00"
                },
                {
                    "id_room": "12",
                    "id": "1166",
                    "text": "hC7f5sCm6t",
                    "begin": "2025-08-08T00:00",
                    "end": "2025-08-10T00:00"
                },
                {
                    "id_room": "36",
                    "id": "6341",
                    "text": "y8qDpw6Pnf",
                    "begin": "2025-08-05T00:00",
                    "end": "2025-08-09T00:00"
                },
                {
                    "id_room": "12",
                    "id": "8068",
                    "text": "TSyDTHFGXY",
                    "begin": "2025-08-13T00:00",
                    "end": "2025-08-24T00:00"
                },
                {
                    "id_room": "16",
                    "id": "3524",
                    "text": "HTDTVm9rs8",
                    "begin": "2025-08-11T00:00",
                    "end": "2025-08-15T00:00"
                },
                {
                    "id_room": "33",
                    "id": "2197",
                    "text": "CFrBA7PT6Z",
                    "begin": "2025-07-26T00:00",
                    "end": "2025-08-04T00:00"
                },
                {
                    "id_room": "40",
                    "id": "2733",
                    "text": "setLpA8Ik9",
                    "begin": "2025-08-21T00:00",
                    "end": "2025-08-30T00:00"
                },
                {
                    "id_room": "33",
                    "id": "6614",
                    "text": "ZLRl5liCer",
                    "begin": "2025-08-21T00:00",
                    "end": "2025-08-26T00:00"
                },
                {
                    "id_room": "15",
                    "id": "8138",
                    "text": "axs75M38sQ",
                    "begin": "2025-07-15T00:00",
                    "end": "2025-07-26T00:00"
                },
                {
                    "id_room": "14",
                    "id": "9909",
                    "text": "a8jlpbpgGT",
                    "begin": "2025-08-20T00:00",
                    "end": "2025-08-26T00:00"
                },
                {
                    "id_room": "8",
                    "id": "2777",
                    "text": "2MOgHNzdco",
                    "begin": "2025-08-25T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "13",
                    "id": "5664",
                    "text": "IifYMpfFrF",
                    "begin": "2025-07-05T00:00",
                    "end": "2025-07-17T00:00"
                },
                {
                    "id_room": "35",
                    "id": "2257",
                    "text": "egjhoDGSd5",
                    "begin": "2025-08-30T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "22",
                    "id": "2306",
                    "text": "Pcag7eVeE5",
                    "begin": "2025-08-17T00:00",
                    "end": "2025-08-29T00:00"
                },
                {
                    "id_room": "10",
                    "id": "4399",
                    "text": "rjnh11qVd2",
                    "begin": "2025-08-02T00:00",
                    "end": "2025-08-15T00:00"
                },
                {
                    "id_room": "15",
                    "id": "6255",
                    "text": "QBKi7HAdnw",
                    "begin": "2025-08-07T00:00",
                    "end": "2025-08-17T00:00"
                },
                {
                    "id_room": "30",
                    "id": "6977",
                    "text": "XSOZv4obS0",
                    "begin": "2025-08-14T00:00",
                    "end": "2025-08-20T00:00"
                },
                {
                    "id_room": "31",
                    "id": "8020",
                    "text": "35EMmulhKd",
                    "begin": "2025-07-16T00:00",
                    "end": "2025-07-20T00:00"
                },
                {
                    "id_room": "33",
                    "id": "5744",
                    "text": "ZXwZ4J0Ahi",
                    "begin": "2025-07-05T00:00",
                    "end": "2025-07-07T00:00"
                },
                {
                    "id_room": "4",
                    "id": "7132",
                    "text": "sn1WmLXRpK",
                    "begin": "2025-07-20T00:00",
                    "end": "2025-07-30T00:00"
                },
                {
                    "id_room": "28",
                    "id": "4526",
                    "text": "upLAgmWGw1",
                    "begin": "2025-08-23T00:00",
                    "end": "2025-08-29T00:00"
                },
                {
                    "id_room": "27",
                    "id": "8458",
                    "text": "LNf0X3zAkd",
                    "begin": "2025-08-14T00:00",
                    "end": "2025-08-26T00:00"
                },
                {
                    "id_room": "12",
                    "id": "3747",
                    "text": "6dIMubBcjG",
                    "begin": "2025-07-16T00:00",
                    "end": "2025-07-30T00:00"
                },
                {
                    "id_room": "23",
                    "id": "4261",
                    "text": "TMlZXzIkEb",
                    "begin": "2025-07-12T00:00",
                    "end": "2025-07-15T00:00"
                },
                {
                    "id_room": "6",
                    "id": "4697",
                    "text": "sRo5CF5mZ0",
                    "begin": "2025-07-19T00:00",
                    "end": "2025-07-25T00:00"
                },
                {
                    "id_room": "16",
                    "id": "8512",
                    "text": "cGUV1XiLDP",
                    "begin": "2025-07-06T00:00",
                    "end": "2025-07-13T00:00"
                },
                {
                    "id_room": "36",
                    "id": "6234",
                    "text": "vXrsT64bNb",
                    "begin": "2025-08-26T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "38",
                    "id": "4298",
                    "text": "i9hP2ouLdF",
                    "begin": "2025-08-08T00:00",
                    "end": "2025-08-15T00:00"
                },
                {
                    "id_room": "26",
                    "id": "7876",
                    "text": "JooM8cz2MH",
                    "begin": "2025-08-29T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "29",
                    "id": "5777",
                    "text": "pUG4oZ5ZAR",
                    "begin": "2025-08-18T00:00",
                    "end": "2025-08-25T00:00"
                },
                {
                    "id_room": "35",
                    "id": "2565",
                    "text": "uin04sPyQk",
                    "begin": "2025-07-03T00:00",
                    "end": "2025-07-07T00:00"
                },
                {
                    "id_room": "28",
                    "id": "4448",
                    "text": "HoUgMaz6ZP",
                    "begin": "2025-08-15T00:00",
                    "end": "2025-08-16T00:00"
                },
                {
                    "id_room": "5",
                    "id": "8574",
                    "text": "LPJhpG9khj",
                    "begin": "2025-07-11T00:00",
                    "end": "2025-07-12T00:00"
                },
                {
                    "id_room": "18",
                    "id": "8024",
                    "text": "wjeBP3LABA",
                    "begin": "2025-08-27T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "23",
                    "id": "9337",
                    "text": "aCh3tyjzPT",
                    "begin": "2025-08-29T00:00",
                    "end": "2025-08-31T00:00"
                },
                {
                    "id_room": "31",
                    "id": "8493",
                    "text": "xOt2DNrqc8",
                    "begin": "2025-07-23T00:00",
                    "end": "2025-07-26T00:00"
                },
                {
                    "id_room": "20",
                    "id": "6760",
                    "text": "QP3U3I0jfq",
                    "begin": "2025-08-08T00:00",
                    "end": "2025-08-11T00:00"
                },
                {
                    "id_room": "14",
                    "id": "4461",
                    "text": "cLu2e2WCMP",
                    "begin": "2025-07-12T00:00",
                    "end": "2025-07-21T00:00"
                },
                {
                    "id_room": "17",
                    "id": "5984",
                    "text": "bUuNTJO4vU",
                    "begin": "2025-07-26T00:00",
                    "end": "2025-08-02T00:00"
                },
                {
                    "id_room": "39",
                    "id": "4152",
                    "text": "iGdA0pU8zI",
                    "begin": "2025-07-17T00:00",
                    "end": "2025-07-23T00:00"
                },
                {
                    "id_room": "38",
                    "id": "4487",
                    "text": "vCvf557vwR",
                    "begin": "2025-08-02T00:00",
                    "end": "2025-08-07T00:00"
                },
                {
                    "id_room": "33",
                    "id": "2279",
                    "text": "40T5rVhSEZ",
                    "begin": "2025-07-25T00:00",
                    "end": "2025-07-26T00:00"
                },
                {
                    "id_room": "18",
                    "id": "1988",
                    "text": "IaJSYyUvUZ",
                    "begin": "2025-07-05T00:00",
                    "end": "2025-07-09T00:00"
                },
                {
                    "id_room": "23",
                    "id": "5763",
                    "text": "qnGWyIuXCb",
                    "begin": "2025-08-10T00:00",
                    "end": "2025-08-11T00:00"
                },
                {
                    "id_room": "3",
                    "id": "6718",
                    "text": "pmP21kzvBz",
                    "begin": "2025-08-24T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "13",
                    "id": "4810",
                    "text": "pxYy3XPEnu",
                    "begin": "2025-08-13T00:00",
                    "end": "2025-08-26T00:00"
                },
                {
                    "id_room": "9",
                    "id": "1609",
                    "text": "5XO4f4jWli",
                    "begin": "2025-07-04T00:00",
                    "end": "2025-07-07T00:00"
                },
                {
                    "id_room": "6",
                    "id": "9590",
                    "text": "CYShmTRPu5",
                    "begin": "2025-08-28T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "6",
                    "id": "3926",
                    "text": "AcyqZPJ73B",
                    "begin": "2025-08-11T00:00",
                    "end": "2025-08-13T00:00"
                },
                {
                    "id_room": "33",
                    "id": "2413",
                    "text": "yFhCVvDiP0",
                    "begin": "2025-07-09T00:00",
                    "end": "2025-07-22T00:00"
                },
                {
                    "id_room": "31",
                    "id": "3183",
                    "text": "ZZPYIti72d",
                    "begin": "2025-08-22T00:00",
                    "end": "2025-08-25T00:00"
                },
                {
                    "id_room": "22",
                    "id": "4017",
                    "text": "7y1nneHYey",
                    "begin": "2025-07-27T00:00",
                    "end": "2025-07-28T00:00"
                },
                {
                    "id_room": "23",
                    "id": "6397",
                    "text": "ylOtccQl93",
                    "begin": "2025-08-04T00:00",
                    "end": "2025-08-10T00:00"
                },
                {
                    "id_room": "32",
                    "id": "4695",
                    "text": "fzibZzG6y5",
                    "begin": "2025-08-28T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "1",
                    "id": "3305",
                    "text": "5fuULQ0nIG",
                    "begin": "2025-08-12T00:00",
                    "end": "2025-08-15T00:00"
                },
                {
                    "id_room": "21",
                    "id": "1909",
                    "text": "1bQpVBXdxF",
                    "begin": "2025-07-23T00:00",
                    "end": "2025-07-27T00:00"
                },
                {
                    "id_room": "31",
                    "id": "4471",
                    "text": "9ozpOgSIwY",
                    "begin": "2025-08-08T00:00",
                    "end": "2025-08-14T00:00"
                },
                {
                    "id_room": "21",
                    "id": "6191",
                    "text": "lL2HYMk2p2",
                    "begin": "2025-08-16T00:00",
                    "end": "2025-08-24T00:00"
                },
                {
                    "id_room": "31",
                    "id": "7724",
                    "text": "xsBvO0MeF9",
                    "begin": "2025-07-06T00:00",
                    "end": "2025-07-10T00:00"
                },
                {
                    "id_room": "35",
                    "id": "7659",
                    "text": "4HWz87pSGc",
                    "begin": "2025-08-10T00:00",
                    "end": "2025-08-14T00:00"
                },
                {
                    "id_room": "4",
                    "id": "4668",
                    "text": "nu2Bfn2M3y",
                    "begin": "2025-08-24T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "13",
                    "id": "4939",
                    "text": "qnrhvKN0wM",
                    "begin": "2025-07-25T00:00",
                    "end": "2025-08-07T00:00"
                },
                {
                    "id_room": "3",
                    "id": "6487",
                    "text": "znoCWcnwrH",
                    "begin": "2025-07-29T00:00",
                    "end": "2025-08-05T00:00"
                },
                {
                    "id_room": "2",
                    "id": "5909",
                    "text": "J84dhQSgFT",
                    "begin": "2025-08-11T00:00",
                    "end": "2025-08-24T00:00"
                },
                {
                    "id_room": "34",
                    "id": "1941",
                    "text": "gAtA3Ij146",
                    "begin": "2025-07-05T00:00",
                    "end": "2025-07-08T00:00"
                },
                {
                    "id_room": "6",
                    "id": "6152",
                    "text": "hgKSPo312W",
                    "begin": "2025-07-01T00:00",
                    "end": "2025-07-06T00:00"
                },
                {
                    "id_room": "23",
                    "id": "7724",
                    "text": "04g3jqSQmD",
                    "begin": "2025-07-15T00:00",
                    "end": "2025-07-20T00:00"
                },
                {
                    "id_room": "32",
                    "id": "7121",
                    "text": "9dZsAZPE87",
                    "begin": "2025-08-21T00:00",
                    "end": "2025-08-22T00:00"
                },
                {
                    "id_room": "11",
                    "id": "1535",
                    "text": "p1unhM9NvR",
                    "begin": "2025-08-22T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "7",
                    "id": "7543",
                    "text": "QeJJDtNRZd",
                    "begin": "2025-08-12T00:00",
                    "end": "2025-08-20T00:00"
                },
                {
                    "id_room": "21",
                    "id": "4786",
                    "text": "g3JWJLRjXk",
                    "begin": "2025-08-29T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "36",
                    "id": "1246",
                    "text": "lfl2nN6cn0",
                    "begin": "2025-07-26T00:00",
                    "end": "2025-07-31T00:00"
                },
                {
                    "id_room": "20",
                    "id": "1269",
                    "text": "kdeN3yD8qZ",
                    "begin": "2025-08-17T00:00",
                    "end": "2025-08-30T00:00"
                },
                {
                    "id_room": "5",
                    "id": "9112",
                    "text": "7Gc26SA1Lr",
                    "begin": "2025-07-24T00:00",
                    "end": "2025-07-28T00:00"
                },
                {
                    "id_room": "25",
                    "id": "5037",
                    "text": "xLJQ2viQlW",
                    "begin": "2025-07-06T00:00",
                    "end": "2025-07-09T00:00"
                },
                {
                    "id_room": "1",
                    "id": "1488",
                    "text": "1VCbAOcshV",
                    "begin": "2025-07-31T00:00",
                    "end": "2025-08-09T00:00"
                },
                {
                    "id_room": "15",
                    "id": "4801",
                    "text": "vxdSPlU6G6",
                    "begin": "2025-07-02T00:00",
                    "end": "2025-07-12T00:00"
                },
                {
                    "id_room": "29",
                    "id": "7359",
                    "text": "RxzOQK4ezx",
                    "begin": "2025-07-31T00:00",
                    "end": "2025-08-11T00:00"
                },
                {
                    "id_room": "27",
                    "id": "2429",
                    "text": "CyZtmEtC9y",
                    "begin": "2025-07-21T00:00",
                    "end": "2025-07-25T00:00"
                },
                {
                    "id_room": "4",
                    "id": "6528",
                    "text": "EIkxb5fgFg",
                    "begin": "2025-07-09T00:00",
                    "end": "2025-07-19T00:00"
                },
                {
                    "id_room": "14",
                    "id": "6701",
                    "text": "YWod9mDnfF",
                    "begin": "2025-07-01T00:00",
                    "end": "2025-07-06T00:00"
                },
                {
                    "id_room": "3",
                    "id": "9870",
                    "text": "8WWqMtQJzb",
                    "begin": "2025-07-18T00:00",
                    "end": "2025-07-21T00:00"
                },
                {
                    "id_room": "37",
                    "id": "1279",
                    "text": "7m0qT2Y0rI",
                    "begin": "2025-07-17T00:00",
                    "end": "2025-07-20T00:00"
                },
                {
                    "id_room": "19",
                    "id": "5524",
                    "text": "VHHpUIKWIE",
                    "begin": "2025-08-18T00:00",
                    "end": "2025-08-19T00:00"
                },
                {
                    "id_room": "36",
                    "id": "4276",
                    "text": "qYwVI1SrPo",
                    "begin": "2025-07-10T00:00",
                    "end": "2025-07-14T00:00"
                },
                {
                    "id_room": "22",
                    "id": "6309",
                    "text": "0FvOd8Gscd",
                    "begin": "2025-08-29T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "1",
                    "id": "4193",
                    "text": "2F0CQfbgVc",
                    "begin": "2025-07-16T00:00",
                    "end": "2025-07-19T00:00"
                },
                {
                    "id_room": "39",
                    "id": "1831",
                    "text": "69ykwz0API",
                    "begin": "2025-07-11T00:00",
                    "end": "2025-07-15T00:00"
                },
                {
                    "id_room": "17",
                    "id": "8097",
                    "text": "FB5ZDvDIVt",
                    "begin": "2025-08-03T00:00",
                    "end": "2025-08-16T00:00"
                },
                {
                    "id_room": "30",
                    "id": "7355",
                    "text": "4f5CmpMOWH",
                    "begin": "2025-08-23T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "12",
                    "id": "7297",
                    "text": "OvVf6gQccU",
                    "begin": "2025-08-01T00:00",
                    "end": "2025-08-07T00:00"
                },
                {
                    "id_room": "23",
                    "id": "3099",
                    "text": "beogJtekdn",
                    "begin": "2025-08-23T00:00",
                    "end": "2025-08-24T00:00"
                },
                {
                    "id_room": "36",
                    "id": "2943",
                    "text": "0BpiHs3t8C",
                    "begin": "2025-08-14T00:00",
                    "end": "2025-08-22T00:00"
                },
                {
                    "id_room": "2",
                    "id": "2633",
                    "text": "7Rg3Y4X3UI",
                    "begin": "2025-08-31T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "37",
                    "id": "4783",
                    "text": "aiFhXE8bAk",
                    "begin": "2025-08-06T00:00",
                    "end": "2025-08-10T00:00"
                },
                {
                    "id_room": "24",
                    "id": "2525",
                    "text": "PclTHjYOuk",
                    "begin": "2025-07-13T00:00",
                    "end": "2025-07-18T00:00"
                },
                {
                    "id_room": "30",
                    "id": "8698",
                    "text": "144jv42T43",
                    "begin": "2025-07-12T00:00",
                    "end": "2025-07-26T00:00"
                },
                {
                    "id_room": "22",
                    "id": "9983",
                    "text": "xU6PUBSlJc",
                    "begin": "2025-07-13T00:00",
                    "end": "2025-07-15T00:00"
                },
                {
                    "id_room": "27",
                    "id": "5697",
                    "text": "zn1nFXzLWi",
                    "begin": "2025-07-03T00:00",
                    "end": "2025-07-17T00:00"
                },
                {
                    "id_room": "4",
                    "id": "6667",
                    "text": "D1h6pzYyFJ",
                    "begin": "2025-08-07T00:00",
                    "end": "2025-08-17T00:00"
                },
                {
                    "id_room": "23",
                    "id": "3538",
                    "text": "vajGYulOhE",
                    "begin": "2025-07-21T00:00",
                    "end": "2025-07-25T00:00"
                },
                {
                    "id_room": "23",
                    "id": "2349",
                    "text": "3xUXQmcPYD",
                    "begin": "2025-08-16T00:00",
                    "end": "2025-08-18T00:00"
                },
                {
                    "id_room": "19",
                    "id": "6185",
                    "text": "XDaZ742AIs",
                    "begin": "2025-07-11T00:00",
                    "end": "2025-07-21T00:00"
                },
                {
                    "id_room": "40",
                    "id": "1391",
                    "text": "l3vLN9UPXr",
                    "begin": "2025-07-21T00:00",
                    "end": "2025-07-28T00:00"
                },
                {
                    "id_room": "8",
                    "id": "3646",
                    "text": "r136HlRfRi",
                    "begin": "2025-07-26T00:00",
                    "end": "2025-08-08T00:00"
                },
                {
                    "id_room": "1",
                    "id": "5505",
                    "text": "uYQu3J7Mp5",
                    "begin": "2025-08-22T00:00",
                    "end": "2025-08-25T00:00"
                },
                {
                    "id_room": "18",
                    "id": "1317",
                    "text": "NUlt2AGhrT",
                    "begin": "2025-07-27T00:00",
                    "end": "2025-08-05T00:00"
                },
                {
                    "id_room": "39",
                    "id": "2417",
                    "text": "92U9JcAjcM",
                    "begin": "2025-08-19T00:00",
                    "end": "2025-08-26T00:00"
                },
                {
                    "id_room": "35",
                    "id": "8322",
                    "text": "UzbwqudTdS",
                    "begin": "2025-08-22T00:00",
                    "end": "2025-08-23T00:00"
                },
                {
                    "id_room": "26",
                    "id": "3167",
                    "text": "4sRBWhjaNy",
                    "begin": "2025-07-17T00:00",
                    "end": "2025-07-25T00:00"
                },
                {
                    "id_room": "35",
                    "id": "5749",
                    "text": "uCQ3x8CKZI",
                    "begin": "2025-07-14T00:00",
                    "end": "2025-07-27T00:00"
                },
                {
                    "id_room": "1",
                    "id": "5523",
                    "text": "4TvFLPh5aS",
                    "begin": "2025-08-28T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "22",
                    "id": "9926",
                    "text": "onQdTWpAri",
                    "begin": "2025-07-31T00:00",
                    "end": "2025-08-03T00:00"
                },
                {
                    "id_room": "26",
                    "id": "1701",
                    "text": "nBUZGlYLZm",
                    "begin": "2025-08-19T00:00",
                    "end": "2025-08-27T00:00"
                },
                {
                    "id_room": "27",
                    "id": "8074",
                    "text": "CRjbDa5cSZ",
                    "begin": "2025-08-02T00:00",
                    "end": "2025-08-03T00:00"
                },
                {
                    "id_room": "29",
                    "id": "7309",
                    "text": "3aEgJIPj26",
                    "begin": "2025-07-10T00:00",
                    "end": "2025-07-22T00:00"
                },
                {
                    "id_room": "26",
                    "id": "3396",
                    "text": "oxnW46iY8r",
                    "begin": "2025-08-08T00:00",
                    "end": "2025-08-13T00:00"
                },
                {
                    "id_room": "25",
                    "id": "7489",
                    "text": "0jfRK8PqSf",
                    "begin": "2025-07-26T00:00",
                    "end": "2025-08-09T00:00"
                },
                {
                    "id_room": "5",
                    "id": "2507",
                    "text": "YTA4a4pRzw",
                    "begin": "2025-07-07T00:00",
                    "end": "2025-07-08T00:00"
                },
                {
                    "id_room": "15",
                    "id": "3734",
                    "text": "d3eU7oX2JD",
                    "begin": "2025-08-24T00:00",
                    "end": "2025-08-27T00:00"
                },
                {
                    "id_room": "24",
                    "id": "3892",
                    "text": "gSRYws5bkx",
                    "begin": "2025-08-03T00:00",
                    "end": "2025-08-13T00:00"
                },
                {
                    "id_room": "32",
                    "id": "6337",
                    "text": "SHnPfCjS5O",
                    "begin": "2025-07-09T00:00",
                    "end": "2025-07-15T00:00"
                },
                {
                    "id_room": "23",
                    "id": "2272",
                    "text": "fLXWM4okNn",
                    "begin": "2025-08-31T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "9",
                    "id": "7006",
                    "text": "MBpEFS41Vl",
                    "begin": "2025-07-12T00:00",
                    "end": "2025-07-24T00:00"
                },
                {
                    "id_room": "35",
                    "id": "8253",
                    "text": "PcS0TYGjey",
                    "begin": "2025-08-23T00:00",
                    "end": "2025-08-25T00:00"
                },
                {
                    "id_room": "2",
                    "id": "4218",
                    "text": "kvnyqza3e7",
                    "begin": "2025-07-05T00:00",
                    "end": "2025-07-12T00:00"
                },
                {
                    "id_room": "37",
                    "id": "4541",
                    "text": "erB1B2LKxL",
                    "begin": "2025-07-10T00:00",
                    "end": "2025-07-15T00:00"
                },
                {
                    "id_room": "10",
                    "id": "6681",
                    "text": "0leDQxiHWV",
                    "begin": "2025-08-17T00:00",
                    "end": "2025-08-21T00:00"
                },
                {
                    "id_room": "38",
                    "id": "8499",
                    "text": "adYr9Vj2hg",
                    "begin": "2025-07-25T00:00",
                    "end": "2025-07-26T00:00"
                },
                {
                    "id_room": "29",
                    "id": "7526",
                    "text": "oncevAEicP",
                    "begin": "2025-07-25T00:00",
                    "end": "2025-07-31T00:00"
                },
                {
                    "id_room": "21",
                    "id": "4690",
                    "text": "ivLCeXeMVk",
                    "begin": "2025-08-09T00:00",
                    "end": "2025-08-11T00:00"
                },
                {
                    "id_room": "22",
                    "id": "3392",
                    "text": "CGcdrzJkbd",
                    "begin": "2025-07-18T00:00",
                    "end": "2025-07-25T00:00"
                },
                {
                    "id_room": "14",
                    "id": "8079",
                    "text": "n9sHtkRpH2",
                    "begin": "2025-08-27T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "11",
                    "id": "3140",
                    "text": "evjNsvs9NJ",
                    "begin": "2025-08-06T00:00",
                    "end": "2025-08-13T00:00"
                },
                {
                    "id_room": "7",
                    "id": "6037",
                    "text": "ajIh6ydPaK",
                    "begin": "2025-07-23T00:00",
                    "end": "2025-08-01T00:00"
                },
                {
                    "id_room": "28",
                    "id": "6847",
                    "text": "uPqEmZ0tpk",
                    "begin": "2025-07-25T00:00",
                    "end": "2025-07-27T00:00"
                },
                {
                    "id_room": "19",
                    "id": "1827",
                    "text": "XGobyingDA",
                    "begin": "2025-07-09T00:00",
                    "end": "2025-07-11T00:00"
                },
                {
                    "id_room": "2",
                    "id": "8742",
                    "text": "TTD8hkfV30",
                    "begin": "2025-07-29T00:00",
                    "end": "2025-08-02T00:00"
                },
                {
                    "id_room": "8",
                    "id": "6957",
                    "text": "ipNpYuFU09",
                    "begin": "2025-08-10T00:00",
                    "end": "2025-08-18T00:00"
                },
                {
                    "id_room": "24",
                    "id": "2908",
                    "text": "uyebbZZQbW",
                    "begin": "2025-08-31T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "34",
                    "id": "3737",
                    "text": "DzZ75r00DU",
                    "begin": "2025-08-06T00:00",
                    "end": "2025-08-10T00:00"
                },
                {
                    "id_room": "9",
                    "id": "3303",
                    "text": "pNgLUz7WMT",
                    "begin": "2025-07-11T00:00",
                    "end": "2025-07-12T00:00"
                },
                {
                    "id_room": "7",
                    "id": "2943",
                    "text": "Sa7IT8JbTN",
                    "begin": "2025-07-07T00:00",
                    "end": "2025-07-10T00:00"
                },
                {
                    "id_room": "23",
                    "id": "7021",
                    "text": "Mxd1CacER0",
                    "begin": "2025-07-29T00:00",
                    "end": "2025-08-03T00:00"
                },
                {
                    "id_room": "6",
                    "id": "1995",
                    "text": "7nD8qdGoMa",
                    "begin": "2025-07-25T00:00",
                    "end": "2025-08-05T00:00"
                },
                {
                    "id_room": "34",
                    "id": "5629",
                    "text": "uRpnNILBDu",
                    "begin": "2025-07-18T00:00",
                    "end": "2025-07-21T00:00"
                },
                {
                    "id_room": "4",
                    "id": "6996",
                    "text": "nXQ8z9qpDe",
                    "begin": "2025-07-30T00:00",
                    "end": "2025-08-07T00:00"
                },
                {
                    "id_room": "22",
                    "id": "3895",
                    "text": "KrLH2pLPto",
                    "begin": "2025-07-02T00:00",
                    "end": "2025-07-06T00:00"
                },
                {
                    "id_room": "21",
                    "id": "2016",
                    "text": "mm6BM4U9S5",
                    "begin": "2025-07-20T00:00",
                    "end": "2025-07-23T00:00"
                },
                {
                    "id_room": "14",
                    "id": "1666",
                    "text": "WOmV0K072K",
                    "begin": "2025-08-04T00:00",
                    "end": "2025-08-07T00:00"
                },
                {
                    "id_room": "5",
                    "id": "5371",
                    "text": "t3BXemuSGB",
                    "begin": "2025-08-18T00:00",
                    "end": "2025-08-31T00:00"
                },
                {
                    "id_room": "25",
                    "id": "7138",
                    "text": "20Lp2LlVyv",
                    "begin": "2025-08-29T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "16",
                    "id": "9605",
                    "text": "vpd2OHgIsy",
                    "begin": "2025-08-31T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "14",
                    "id": "3781",
                    "text": "bGdW91oQot",
                    "begin": "2025-08-17T00:00",
                    "end": "2025-08-19T00:00"
                },
                {
                    "id_room": "8",
                    "id": "6881",
                    "text": "VvgyU40SY1",
                    "begin": "2025-07-08T00:00",
                    "end": "2025-07-20T00:00"
                },
                {
                    "id_room": "40",
                    "id": "1027",
                    "text": "D09qlkXSbn",
                    "begin": "2025-07-11T00:00",
                    "end": "2025-07-13T00:00"
                },
                {
                    "id_room": "14",
                    "id": "1825",
                    "text": "swUop4iqxW",
                    "begin": "2025-07-08T00:00",
                    "end": "2025-07-09T00:00"
                },
                {
                    "id_room": "18",
                    "id": "3724",
                    "text": "s2WYatagoU",
                    "begin": "2025-07-15T00:00",
                    "end": "2025-07-22T00:00"
                },
                {
                    "id_room": "14",
                    "id": "9204",
                    "text": "6bTyQh2drN",
                    "begin": "2025-07-24T00:00",
                    "end": "2025-07-25T00:00"
                },
                {
                    "id_room": "9",
                    "id": "8219",
                    "text": "gRf6PujuwI",
                    "begin": "2025-08-19T00:00",
                    "end": "2025-08-20T00:00"
                },
                {
                    "id_room": "22",
                    "id": "7063",
                    "text": "k4daDLNTln",
                    "begin": "2025-08-03T00:00",
                    "end": "2025-08-07T00:00"
                },
                {
                    "id_room": "12",
                    "id": "7982",
                    "text": "CUyz9baS4H",
                    "begin": "2025-08-31T00:00",
                    "end": "2025-09-01T00:00"
                },
                {
                    "id_room": "35",
                    "id": "5220",
                    "text": "khCIlvhuHn",
                    "begin": "2025-07-08T00:00",
                    "end": "2025-07-13T00:00"
                },
                {
                    "id_room": "40",
                    "id": "6285",
                    "text": "Low1TlQ44m",
                    "begin": "2025-07-06T00:00",
                    "end": "2025-07-08T00:00"
                },
                {
                    "id_room": "39",
                    "id": "5690",
                    "text": "3l5D0e9oBw",
                    "begin": "2025-08-13T00:00",
                    "end": "2025-08-18T00:00"
                },
                {
                    "id_room": "34",
                    "id": "7127",
                    "text": "eTBhAxI7os",
                    "begin": "2025-08-26T00:00",
                    "end": "2025-08-29T00:00"
                },
                {
                    "id_room": "35",
                    "id": "8370",
                    "text": "X1zT2Uoenk",
                    "begin": "2025-07-27T00:00",
                    "end": "2025-08-07T00:00"
                },
                {
                    "id_room": "32",
                    "id": "4180",
                    "text": "70YPuPla8L",
                    "begin": "2025-07-15T00:00",
                    "end": "2025-07-19T00:00"
                },
                {
                    "id_room": "5",
                    "id": "7558",
                    "text": "KjuSjb214H",
                    "begin": "2025-07-14T00:00",
                    "end": "2025-07-21T00:00"
                },
                {
                    "id_room": "16",
                    "id": "4039",
                    "text": "FsdteKvs9A",
                    "begin": "2025-07-17T00:00",
                    "end": "2025-07-28T00:00"
                }
            ]
        }
    </script>

    <script type="text/javascript">
        //https://coderseye.com/2007/how-to-do-http-basic-auth-in-ajax.html
        //https://stackoverflow.com

        let data = JSON.parse(document.getElementById('data').innerHTML);

        const oneDay = 24 * 60 * 60 * 1000;
        const oneHour = 60 * 60 * 1000;

        function startOfDayf(day) {
            var start = new Date(day);
            start.setHours(0, 0, 0, 0);
            return start.getTime();
        }

        var firstDate = startOfDayf(Date.parse(data.time_begin));
        var secondDate = startOfDayf(Date.parse(data.time_end));
        var diffHours = Math.round(Math.abs((firstDate - secondDate) / (1000 * 60 * 60)));

        var markerRoom = null;
        var markerStart = null;
        var markerEnd = null;

        var rooms = [];

        var rowCount = 0;

        function addRooms(jsonRooms) {
            for (let i = 0; i < data.rooms.length; i++) {
                let jsonRoom = data.rooms[i];
                rooms[i] = newRoom(jsonRoom);
            }
        }

        function findRoom(rooms, id) {
            for (let i in rooms) {
                if (rooms[i].id == id)
                    return rooms[i];
            }
            return 0;
        }

        function addReservations(jsonReservaiotns) {
            for (let i = 0; i < data.reservations.length; i++) {
                let jsonReservation = data.reservations[i];
                let room = findRoom(rooms, jsonReservation.id_room)
                room.addReservation(jsonReservation);
            }
            for (let i in rooms) {
                rowCount += rooms[i].maxSimRes;
            }
        }

        function newReservation(jsonReservation, pos) {
            let reservation = {
                id: jsonReservation.id,
                pos: pos,
                begin: Date.parse(jsonReservation.begin),
                end: Date.parse(jsonReservation.end),
                text: jsonReservation.text
            };
            return reservation
        }

        function newRoom(jsonRoom) {
            let room = {
                top: 0,
                maxSimRes: 0,
                id: jsonRoom.id,
                text: jsonRoom.text,
                reservations: [],
                addReservation: function(jsonReservation) {
                    let cnt = 0;
                    for (let i in this.reservations) {
                        let reservation = this.reservations[i];
                        if (reservation.begin < Date.parse(jsonReservation.end) &&
                            reservation.end > Date.parse(jsonReservation.begin)) {
                            cnt++;
                            alert("Znaleziono wiele rezerwacji w tym samym czasie dla tego saego pokoju - to zostanie bdnie wywietlone!!! pokoj " + this.text + " czas " + TimeToStr2(reservation.begin));
                        }
                    }

                    this.reservations[jsonReservation.id.toString()] =
                        newReservation(jsonReservation, cnt);

                    if (this.maxSimRes < cnt)
                        this.maxSimRes = cnt;
                },
                findReservationByTime: function(time) {
                    for (let i in this.reservations) {
                        let reservation = this.reservations[i];
                        if (reservation.begin < time &&
                            reservation.end > time) {
                            return reservation;
                        }
                    }
                }
            };
            return room;
        }

        var canWidth = 0;
        var canHeight = 0;

        const dims = {
            fontHeight: 14,
            hourWidth: 5,
            rowHeight: 30,
            titleColWidth: 90,
            titleRowHeight: 30,
            arrMargin1: 3,
            arrMargin2: 7,
            arrLength: 15
        }

        var shiftX = 0,
            shiftY = 0,
            zoom = 1;

        var width = 0;
        var height = 0;

        var zoomedDims = [];

        function move() {
            shiftX++;
            resize();
        }

        function resize() {
            canWidth = window.innerWidth - 30;
            canHeight = window.innerHeight - 30;

            draw();
        }

        function TimeToStr(time) {
            let date = new Date(time);
            let day = date.getDate();
            let month = date.getMonth() + 1;
            let year = date.getFullYear();
            //let hour =date.getHours();
            return year + '-' + month + '-' + day; //+'-'+hour;
        }

        function updateDims() {
            for (let i in dims) {
                zoomedDims[i] = dims[i] * zoom;
            }

            width = diffHours * zoomedDims.hourWidth + zoomedDims.titleColWidth;
            height = rooms.length * zoomedDims.rowHeight + zoomedDims.titleRowHeight;

            if (shiftY + canHeight > height)
                shiftY = height - canHeight;
            if (shiftX + canWidth > width)
                shiftX = width - canWidth;
            if (shiftX < 0)
                shiftX = 0;
            if (shiftY < 0)
                shiftY = 0;
        }

        function TimeToPx(time) {
            //mozna by chyba uzyskac liczbe pikseli na minute albo milisekunde? (ulamek) i tego latwiej uzywac
            let diff = Math.abs(time - firstDate);
            let hours = diff / oneHour;
            return zoomedDims.titleColWidth + hours * zoomedDims.hourWidth;
        }

        function weekend(time) {
            let date = new Date(time);
            if (date.getDay() == 0 || date.getDay() == 6)
                return true;
            else
                return false;
        }

        function incDay(day) {
            let time = new Date(day);
            time.setDate(time.getDate() + 1);
            return time.getTime();
        }

        function drawCols(ctx) {
            let visibleDays = (((canWidth - zoomedDims.titleColWidth) / zoomedDims.hourWidth) / 24) + 1;

            let firstVisibleHour = shiftX / zoomedDims.hourWidth;
            let day = firstDate + (firstVisibleHour * oneHour);
            let startOfDay = startOfDayf(day);

            let startPx = TimeToPx(startOfDay) - zoomedDims.titleColWidth;

            let left = startPx + zoomedDims.titleColWidth - shiftX;


            ctx.font = zoomedDims.fontHeight + "px Arial";
            ctx.textAlign = "center";

            let maxDay = startOfDay + visibleDays * oneDay;

            let today = new Date();
            today = startOfDayf(today);

            for (let iDay = startOfDay; iDay < maxDay; iDay = incDay(iDay)) {

                if (iDay == today) {
                    ctx.fillStyle = "#6ddc8";
                } else if (weekend(iDay)) {
                    ctx.fillStyle = "#f5e9eb";
                    ctx.fillRect(left, zoomedDims.titleRowHeight, (zoomedDims.hourWidth * 24), canHeight - zoomedDims.titleRowHeight);
                    ctx.fillStyle = "#ecd3d6";
                } else {
                    ctx.fillStyle = "#97aebe";
                }
                ctx.fillRect(left, 0, (zoomedDims.hourWidth * 24), zoomedDims.titleRowHeight);
                ctx.fillStyle = "black";
                ctx.fillText(TimeToStr(iDay), left + (zoomedDims.hourWidth * 12), -2 + zoomedDims.titleRowHeight / 2 + zoomedDims.fontHeight / 2);
                if (left >= zoomedDims.titleColWidth) {
                    ctx.beginPath();
                    ctx.moveTo(left, 0);
                    ctx.lineTo(left, canHeight);
                }
                ctx.strokeStyle = "gray";
                ctx.stroke();

                left += (zoomedDims.hourWidth * 24);
            }

        }

        function drawRows(ctx) {
            let visibleRows = (canHeight - zoomedDims.titleRowHeight) / zoomedDims.rowHeight + 1;

            let firstVisibleRoom = Math.floor(shiftY / zoomedDims.rowHeight);
            let top = zoomedDims.titleRowHeight - shiftY % zoomedDims.rowHeight;


            ctx.font = zoomedDims.fontHeight + "px Arial";
            ctx.textAlign = "center";

            for (let i = 0; i < visibleRows; i++) {
                if (i + firstVisibleRoom >= rooms.length)
                    break;
                ctx.fillStyle = "#97aebe";
                ctx.fillRect(0, top, zoomedDims.titleColWidth, zoomedDims.rowHeight);
                ctx.fillStyle = "black";
                ctx.fillText(rooms[i + firstVisibleRoom].text, zoomedDims.titleColWidth / 2, top + zoomedDims.rowHeight / 2 + zoomedDims.fontHeight / 2);
                if (top >= zoomedDims.titleRowHeight) {
                    ctx.beginPath();
                    ctx.moveTo(0, top);
                    ctx.lineTo(canWidth, top);
                }
                ctx.stroke();

                top += zoomedDims.rowHeight;
            }
        }

        function point(X, Y) {
            let point = {
                x: X,
                y: Y
            }
            return point;
        }

        function drawData(ctx) {
            //fragment drawRows	
            let visibleRows = (canHeight - zoomedDims.titleRowHeight) / zoomedDims.rowHeight + 1;

            let firstVisibleRoom = Math.floor(shiftY / zoomedDims.rowHeight);
            let top = zoomedDims.titleRowHeight - shiftY % zoomedDims.rowHeight;

            //fragment drawCols
            let visibleDays = ((canWidth - zoomedDims.titleColWidth) / zoomedDims.hourWidth) / 24;

            let firstVisibleHour = shiftX / zoomedDims.hourWidth;
            let day = firstDate + (firstVisibleHour * oneHour);
            let startOfDay = startOfDayf(day);;

            ctx.fillStyle = "black";
            ctx.font = zoomedDims.fontHeight + "px Arial";
            ctx.textAlign = "center";

            let firstVisiblePx = shiftX;
            let lastVisiblePx = shiftX + canWidth;

            for (let i = 0; i < visibleRows; i++) {
                if (i + firstVisibleRoom >= rooms.length)
                    break;

                let room = rooms[i + firstVisibleRoom];
                for (let j in room.reservations) {
                    let reservation = room.reservations[j];

                    let leftEdge = TimeToPx(reservation.begin);
                    let rightEdge = TimeToPx(reservation.end);
                    if (leftEdge < lastVisiblePx && rightEdge > firstVisiblePx) {
                        //draw
                        ctx.save();
                        ctx.rect(zoomedDims.titleColWidth, zoomedDims.titleRowHeight, canWidth, canHeight);
                        ctx.clip();

                        {
                            let left = leftEdge - shiftX;
                            let right = rightEdge - shiftX;
                            let middle = top + zoomedDims.rowHeight / 2;

                            //szczyty
                            let p1 = point(left, middle);
                            let p2 = point(right, middle);
                            //rogi
                            let p3 = point(left + zoomedDims.arrLength, top + zoomedDims.arrMargin1);
                            let p4 = point(left + zoomedDims.arrLength, top + zoomedDims.rowHeight - zoomedDims.arrMargin1);
                            let p5 = point(right - zoomedDims.arrLength, top + zoomedDims.arrMargin1);
                            let p6 = point(right - zoomedDims.arrLength, top + zoomedDims.rowHeight - zoomedDims.arrMargin1);
                            //prostokat
                            let p7 = point(left + zoomedDims.arrLength, top + zoomedDims.arrMargin2);
                            let p8 = point(left + zoomedDims.arrLength, top + zoomedDims.rowHeight - zoomedDims.arrMargin2);
                            let p9 = point(right - zoomedDims.arrLength, top + zoomedDims.arrMargin2);
                            let p10 = point(right - zoomedDims.arrLength, top + zoomedDims.rowHeight - zoomedDims.arrMargin2);


                            ctx.beginPath();
                            ctx.moveTo(p1.x, p1.y);
                            ctx.lineTo(p3.x, p3.y);
                            ctx.lineTo(p7.x, p7.y);
                            ctx.lineTo(p9.x, p9.y);
                            ctx.lineTo(p5.x, p5.y);
                            ctx.lineTo(p2.x, p2.y);
                            ctx.lineTo(p6.x, p6.y);
                            ctx.lineTo(p10.x, p10.y);
                            ctx.lineTo(p8.x, p8.y);
                            ctx.lineTo(p4.x, p4.y);
                            ctx.closePath();
                            ctx.fillStyle = "black";
                            ctx.fill();

                        }
                        ctx.restore();
                        ctx.beginPath();

                        ctx.fillStyle = "white";
                        ctx.font = zoomedDims.fontHeight + "px Arial";
                        ctx.textAlign = "center";

                        let textPos = 0; {
                            let leftE = leftEdge - shiftX + zoomedDims.arrLength;;
                            let rightE = rightEdge - shiftX - zoomedDims.arrLength;;
                            if (leftE < zoomedDims.titleColWidth)
                                leftE = zoomedDims.titleColWidth;
                            if (rightE > canWidth)
                                rightE = canWidth;
                            textPos = leftE + (rightE - leftE) / 2;
                        }
                        //clip text
                        let leftE = leftEdge - shiftX + zoomedDims.arrLength;
                        let rightE = rightEdge - shiftX - zoomedDims.arrLength; {
                            if (leftE < zoomedDims.titleColWidth)
                                leftE = zoomedDims.titleColWidth;
                            if (rightE > canWidth)
                                rightE = canWidth;

                            if (rightE < leftE)
                                rightE = leftE;
                        }
                        ctx.save();
                        ctx.beginPath();
                        let topC = top;
                        if (topC < zoomedDims.titleRowHeight)
                            topC = zoomedDims.titleRowHeight;
                        ctx.rect(leftE, topC, rightE - leftE, zoomedDims.rowHeight);
                        ctx.clip();
                        ctx.fillText(reservation.text, textPos, -2 + top + zoomedDims.rowHeight / 2 + zoomedDims.fontHeight / 2);

                        ctx.restore();
                        ctx.beginPath();
                    }
                }

                top += zoomedDims.rowHeight;
            }
        }

        function RoomToTop(room) {
            let top = rooms.indexOf(room)
            top *= zoomedDims.rowHeight
            top += zoomedDims.titleRowHeight;
            top -= shiftY;
            return top;
        }

        function drawMark(mark, ctx) {
            if (mark != null &&
                mark > PxToTime(zoomedDims.titleColWidth) &&
                mark < PxToTime(canWidth)) {
                const size = 20 * zoom;
                let top = RoomToTop(markerRoom);
                let left = TimeToPx(mark) - shiftX;
                if (top > 0 && top < canWidth && left - size > zoomedDims.titleColWidth) {
                    ctx.fillStyle = "black";
                    ctx.fillRect(left - size, top - size + zoomedDims.rowHeight / 2, 2 * size, 2 * size);
                }
            }
        }

        function drawMarker(ctx) {
            drawMark(markerStart, ctx);
            drawMark(markerEnd, ctx);
        }

        function draw() {
            updateDims();

            let c = document.getElementById("myCanvas");

            c.width = canWidth;
            c.height = canHeight;

            let ctx = c.getContext("2d", {
                alpha: false
            });
            ctx.fillStyle = "white";
            ctx.fillRect(0, 0, c.width, c.height);



            drawCols(ctx);
            drawRows(ctx);
            drawData(ctx);
            drawMarker(ctx);

            ctx.stroke();

            ctx.fillStyle = "white";
            ctx.fillRect(0, 0, zoomedDims.titleColWidth - 1, zoomedDims.titleRowHeight - 1);
            ctx.textAlign = "center";
            ctx.fillStyle = "black";
            ctx.fillText("+", zoomedDims.titleColWidth / 4, zoomedDims.titleRowHeight / 2 + zoomedDims.fontHeight / 2 - 3);
            ctx.fillText("-", zoomedDims.titleColWidth / 2 + zoomedDims.titleColWidth / 4, zoomedDims.titleRowHeight / 2 + zoomedDims.fontHeight / 2 - 3);
            ctx.beginPath();
            ctx.moveTo(zoomedDims.titleColWidth / 2, 0);
            ctx.lineTo(zoomedDims.titleColWidth / 2, zoomedDims.titleRowHeight);
            ctx.stroke();
        }

        addRooms();
        addReservations();

        resize();

        function getMousePos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();
            return {
                x: evt.clientX - rect.left,
                y: evt.clientY - rect.top
            };
        }

        function getTouchPos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();
            return {
                x: evt.changedTouches[0].clientX - rect.left,
                y: evt.changedTouches[0].clientY - rect.top
            };
        }

        var canvas = document.getElementById("myCanvas");
        var mouseDown = false;
        var lastPos = 0;
        var lastTouchPos = 0;
        var moved = false;

        function handleMouseDown(e) {
            var pos = getMousePos(canvas, e);

            mouseDown = true;

            if (pos.y > 0 && pos.y < zoomedDims.titleRowHeight) {
                if (pos.x > 0 && pos.x < zoomedDims.titleColWidth / 2) {
                    zoom += zoom * 0.2;
                    shiftX += shiftX * 0.2;
                    shiftY += shiftY * 0.2;
                    resize();
                }
                if (pos.x > zoomedDims.titleColWidth / 2 && pos.x < zoomedDims.titleColWidth) {
                    zoom -= zoom * 0.2;
                    if (zoom < 0.1)
                        zoom = 1;
                    shiftX -= shiftX * 0.2;
                    shiftY -= shiftY * 0.2;
                    resize();
                }
            }

        }

        function handleMouseUp(e) {
            //var pos = getMousePos(canvas, e);

            mouseDown = false;
            lastPos = 0;
        }

        function handleMouseOut(e) {
            //var pos = getMousePos(canvas, e);

            mouseDown = false;
            lastPos = 0;
        }

        function handleMouseMove(e) {
            if (mouseDown) {
                let pos = getMousePos(canvas, e);
                if (lastPos != 0) {
                    shiftX += lastPos.x - pos.x;
                    shiftY += lastPos.y - pos.y;
                    moved = true;
                    resize();
                }
                lastPos = pos;
            }
        }
        //to uwzglednia kolumne tytulowa!
        function PxToTime(px) {
            let hours = (px + shiftX - zoomedDims.titleColWidth) / zoomedDims.hourWidth;;
            return firstDate + hours * oneHour;
        }

        function TimeToStr2(time) {
            let date = new Date(time);
            let day = date.getDate();
            let month = date.getMonth() + 1;
            let year = date.getFullYear();

            let hour = date.getHours();
            let minute = date.getMinutes();
            let second = date.getSeconds();
            return year + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second;
        }

        function pointToTime(p) {
            return PxToTime(p.x);
        }

        function pointToRoom(p) {
            let i = Math.floor((shiftY + p.y - zoomedDims.titleRowHeight) / zoomedDims.rowHeight);
            return rooms[i];
        }

        function pointToReservation(p) {
            let room = pointToRoom(p);
            if (typeof room !== "undefined") {
                let time = pointToTime(p);
                //alert(TimeToStr2(time));
                return room.findReservationByTime(time);
            }
        }

        function handleMouseClick(e) {
            if (!moved) {
                var pos = getMousePos(canvas, e);
                if (pos.x > zoomedDims.titleColWidth &&
                    pos.y > zoomedDims.titleRowHeight) {
                    let res = pointToReservation(pos);
                    if (typeof res !== "undefined") {
                        alert(res.text + '\n' + TimeToStr2(res.begin) + '\n' + TimeToStr2(res.end));
                    } else {
                        let room = pointToRoom(pos);
                        if (typeof room != "undefined") {
                            if (markerRoom == null) {
                                markerRoom = room;
                            } else if (markerRoom != room) {
                                markerStart = null;
                                markerEnd = null;
                                markerRoom = null;
                                resize();
                                return;
                            }

                            let time = pointToTime(pos);
                            if (markerStart == null) {
                                markerStart = time;
                            } else {
                                markerEnd = time;
                                resize();
                                if (confirm("Czy sprbowa doda rezerwacj od " + TimeToStr2(markerStart) + " do " + TimeToStr2(time) + " dla pokoju " + room.text + " ?")) {}
                                markerStart = null;
                                markerEnd = null;
                                markerRoom = null;
                            }
                            resize();
                        }
                    }
                }
            }
            moved = false;

        }

        function handleTouchEnd(e) {
            lastTouchPos = 0;
        }

        function handleTouchMove(e) {
            let pos = getTouchPos(canvas, e);
            if (lastTouchPos != 0) {
                shiftX += lastTouchPos.x - pos.x;
                shiftY += lastTouchPos.y - pos.y;
                moved = true;
                resize();
            }
            lastTouchPos = pos;
        }

        function handleTouchStart(e) {
            lastTouchPos = 0;
        }


        canvas.onmousedown = handleMouseDown;
        canvas.onmousemove = handleMouseMove;
        canvas.onmouseup = handleMouseUp;
        canvas.onmouseout = handleMouseOut;
        canvas.onclick = handleMouseClick;

        canvas.ontouchend = handleTouchEnd;
        canvas.ontouchmove = handleTouchMove;
        canvas.ontouchstart = handleTouchStart;

        var showError = function(text) {
            alert("Bd(autoryzacja http?)");
        }

        function make_base_auth(user, password) {
            let tok = user + ':' + password;
            let hash = btoa(tok);
            return "Basic " + hash;
        }

        function getHTTP(url, callback) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', url, true);
            //xhr.responseType = 'json';
            xhr.onerror = showError;
            xhr.onload = function() {
                var status = xhr.status;
                callback(status, xhr.response);
            };
            //xhr.setRequestHeader('Authorization', make_base_auth("vivek","sec"));		
            xhr.send();

        };

        var setData = function(status, text) {
            alert(status);
            alert(text);
        };

        getHTTP("http://192.168.2.1/cgi-bin/luci", setData);
    </script>
</body>

</html>